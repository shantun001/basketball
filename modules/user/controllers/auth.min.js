app.controller("AuthController",function(a,l,d,k,f,g){a.authdata={};a.userTypes=[];a.loginErrors={};a.registerErrors={};d.types().then(function(b){a.userTypes=b.data})["catch"](function(a){});var e=document.getElementById("loginButton"),h=document.querySelector(".homeLink");window.location.href.includes("www.s4upro.com/tools/demo_team")?(a.authdata={email:"team",password:"s4up2018"},setTimeout(function(){h.click()},200),void 0===sessionStorage.user&&setTimeout(function(){e.click()},200)):window.location.href.includes("www.s4upro.com/tools/demo_player")&&
    (a.authdata={email:"player",password:"s4up2018"},setTimeout(function(){h.click()},200),void 0===sessionStorage.user&&setTimeout(function(){e.click()},200));$(function(){$("#checkBox").click(function(){if($("#checkBox").is(":checked")){var a=new Date;a.setSeconds(a.getSeconds()+172800);document.cookie="name=remember; expires="+a.toUTCString()}else document.cookie="name=remember; expires="+(new Date(0)).toUTCString()})});document.cookie.includes("name=remember")&&(a.authdata={email:localStorage.userName,
    password:localStorage.password},void 0===sessionStorage.user&&setTimeout(function(){e.click()}));a.login=function(){var b=a.authdata;localStorage.userName=a.authdata.email;localStorage.password=a.authdata.password;a.loginErrors={};(new Fingerprint2({swfContainerId:!0,swfPath:!0,userDefinedFonts:!0,excludeLanguage:!0,excludeScreenResolution:!0,excludeTimezoneOffset:!0,excludeAddBehavior:!0,excludeDoNotTrack:!0,excludeAdBlock:!0,excludeJsFonts:!0,excludeFlashFonts:!0,excludeIEPlugins:!0})).get(function(a){b.device_id=
    a;console.log("qqq",b.device_id)});g.getIp().then(function(a){b.ip=a.ip}).then(function(){g.getCountry(b.ip).then(function(a){b.country=a.country_name}).then(function(){k.login(b).then(function(c){200==c.status&&(console.log("logged in"),a.authdata={},b={},sessionStorage.user=JSON.stringify(c.data),sessionStorage.token=c.data.token,sessionStorage.publicUserName=c.data.user.email,window.location.reload())})["catch"](function(b){a.loginErrors=b.data;console.log("errors, ",b)})})})};a.create=function(){a.registerErrors=
    {};d.create(a.user).then(function(b,c,d){"201 Created"==b.status+" "+b.statusText?(a.updateSuccess=!0,f(function(){$("#register-modal").fadeOut()},2E3),a.user={}):alert("Error! "+b.data.email.join())})["catch"](function(b){a.registerErrors=b.data})};$("#update-modal").on("hide.bs.modal",function(){a.updateError=!1;a.updateSuccess=!1});$("#register-modal").on("hide.bs.modal",function(){a.updateError=!1;a.updateSuccess=!1});a.updateError=!1;a.updateSuccess=!1;a.update=function(){a.updateError=!1;a.updateSuccess=
    !1;a.registerErrors={};a.sendData={email:a.user.email};console.log("user ",a.user);a.user.hasOwnProperty("password")&&""!=a.user.password&&(a.sendData.password=a.user.password);""!=a.user.first_name&&(a.sendData.first_name=a.user.first_name);""!=a.user.last_name&&(a.sendData.last_name=a.user.last_name);a.user.hasOwnProperty("user_type")&&(a.sendData.user_type=a.user.user_type);""!=a.user.phone&&(a.sendData.phone=a.user.phone);""!=a.user.skype&&(a.sendData.skype=a.user.skype);""!=a.user.team&&(a.sendData.team=
    a.user.team);console.log("send obj",a.sendData);d.updateMe(a.sendData).then(function(b){console.log("response",b);if("200 OK"==b.status+" "+b.statusText){a.updateSuccess=!0;f(function(){$("#update-modal").fadeOut()},2E3);for(var c in b.data)a.user[c]=b.data[c];delete a.user.password;delete a.user.user_type}else a.updateError=!0})}});