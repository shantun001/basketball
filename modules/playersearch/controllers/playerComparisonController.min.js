app.controller("PlayerComparisonController",["$scope","$rootScope","PlayerSearchService","$location",function(a,e,d,f){a.searchString="";a.selectedLeague=[{league:""},{league:""},{league:""},{league:""},{league:""}];a.selectedSeason=[{season:""},{season:""},{season:""},{season:""},{season:""}];a.width=1150;a.top=-500;a.height=0;a.data=null;a.chosenPlayers=[];a.chosenPlayersData=[];a.chosenPlayersLeagues=[];a.chosenPlayersSeasons=[];a.chosenPlayersDataTables=[];a.comparisonBubble={};a.chosenPlayerCareer=
    {Team:"",GP:0,MIN:0,PTS:0,FGM:0,FGA:0,"FG%":0,"3PM":0,"3PA":0,"3P%":0,"2PM":0,"2PA":0,"2P%":0,FTM:0,FTA:0,"FT%":0,OR:0,DR:0,TR:0,AS:0,TO:0,ST:0,BS:0,FM:0,FR:0,VAL:0,VIR:0,OER:0};a.choosePlayer=function(b){if(a.data.length){var c=a.data.find(function(a,g){if(a.id===b)return a});a.chosenPlayers.push(c);a.lostFocus();a.getCareer(b)}};a.choosePlayerEnter=function(b){"Enter"===b.key&&(a.chosenPlayers.push(a.data[0]),a.getCareer(a.data[0].id),a.lostFocus())};a.deletePlayer=function(b){a.chosenPlayers.splice(b,
    1);a.chosenPlayersData.splice(b,1);a.chosenPlayersLeagues.splice(b,1);a.chosenPlayersSeasons.splice(b,1);a.chosenPlayersDataTables.splice(b,1);a.comparisonPlayers()};a.foundPlayerId=function(a){e.playerProfile=a};a.lostFocus=function(){a.searchString="";a.data=null;a.width=320;a.searching=!1;a.height=0};a.getPlayers=function(){d.getPlayers(a.searchString).then(function(b){5!==a.chosenPlayers.length?(a.data=null,b.length?(a.top=0,a.height=300):a.top=-500,a.data=b,a.width=786):(a.lostFocus(),alert("You can compare upto five players only"))});
    $(document).click(function(b){$(b.target).closest(".comparison-search-result").length||(a.searchString="",a.data=null,a.width=320,a.searching=!1,a.height=0,a.top=-500)})};a.getCareer=function(b){d.getCareer(b).then(function(b){a.chosenPlayersData.push(b);a.chosenPlayersLeagues.push([]);a.chosenPlayersSeasons.push([]);$("#comparison-select-season_0").selectpicker({dropupAuto:!1});$("#comparison-select-season_1").selectpicker({dropupAuto:!1});$("#comparison-select-season_2").selectpicker({dropupAuto:!1});
    $("#comparison-select-season_3").selectpicker({dropupAuto:!1});$("#comparison-select-season_4").selectpicker({dropupAuto:!1});$("#comparison-select-league_0").selectpicker({dropupAuto:!1});$("#comparison-select-league_1").selectpicker({dropupAuto:!1});$("#comparison-select-league_2").selectpicker({dropupAuto:!1});$("#comparison-select-league_3").selectpicker({dropupAuto:!1});$("#comparison-select-league_4").selectpicker({dropupAuto:!1});b.map(function(b){-1===a.chosenPlayersSeasons[a.chosenPlayersSeasons.length-
    1].indexOf(b.season_name)&&a.chosenPlayersSeasons[a.chosenPlayersSeasons.length-1].push(b.season_name);-1===a.chosenPlayersLeagues[a.chosenPlayersLeagues.length-1].indexOf(b.league_name)&&"average"!==b.league_name&&b.season_name===a.chosenPlayersSeasons[a.chosenPlayersSeasons.length-1][0]&&a.chosenPlayersLeagues[a.chosenPlayersLeagues.length-1].push(b.league_name)});a.selectedSeason[a.chosenPlayers.length-1].season=a.chosenPlayersSeasons[a.chosenPlayers.length-1][0];a.selectedLeague[a.chosenPlayers.length-
    1].league=a.chosenPlayersLeagues[a.chosenPlayers.length-1][0];a.chosenPlayersData[a.chosenPlayersData.length-1].map(function(b){b.season_name===a.selectedSeason[a.chosenPlayers.length-1].season&&b.league_name===a.selectedLeague[a.chosenPlayers.length-1].league&&"average"!==b.league_name&&(a.chosenPlayerCareer.Team=b.team_name,a.chosenPlayerCareer.GP=b.played,a.chosenPlayerCareer.MIN=b.minutes,a.chosenPlayerCareer.PTS=b.points,a.chosenPlayerCareer.FGM=b.fg_made,a.chosenPlayerCareer.FGA=b.fg_attempts,
        a.chosenPlayerCareer["FG%"]=a.chosenPlayerCareer.FGA?a.chosenPlayerCareer.FGM/a.chosenPlayerCareer.FGA*100:0,a.chosenPlayerCareer["3PM"]=b.p3_made,a.chosenPlayerCareer["3PA"]=b.p3_attempts,a.chosenPlayerCareer["3P%"]=a.chosenPlayerCareer["3PA"]?a.chosenPlayerCareer["3PM"]/a.chosenPlayerCareer["3PA"]*100:0,a.chosenPlayerCareer["2PM"]=b.p2_made,a.chosenPlayerCareer["2PA"]=b.p2_attempts,a.chosenPlayerCareer["2P%"]=a.chosenPlayerCareer["2PA"]?a.chosenPlayerCareer["2PM"]/a.chosenPlayerCareer["2PA"]*100:
        0,a.chosenPlayerCareer.FTM=b.ft_made,a.chosenPlayerCareer.FTA=b.ft_attempts,a.chosenPlayerCareer["FT%"]=a.chosenPlayerCareer.FTA?a.chosenPlayerCareer.FTM/a.chosenPlayerCareer.FTA*100:0,a.chosenPlayerCareer.OR=b.of_rebounds,a.chosenPlayerCareer.DR=b.df_rebounds,a.chosenPlayerCareer.TR=a.chosenPlayerCareer.OR+a.chosenPlayerCareer.DR,a.chosenPlayerCareer.AS=b.assists,a.chosenPlayerCareer.TO=b.turnovers,a.chosenPlayerCareer.ST=b.steals,a.chosenPlayerCareer.BS=b.block_shots,a.chosenPlayerCareer.FM=b.fouls_made,
        a.chosenPlayerCareer.FR=b.fouls_received,a.chosenPlayerCareer.VAL=b.val,a.chosenPlayerCareer.VIR=b.vir,a.chosenPlayerCareer.OER=b.oer,a.chosenPlayerCareer.timeInNum=a.timeToNum(b.minutes))});a.chosenPlayersDataTables.push({Nationality:a.chosenPlayers[a.chosenPlayers.length-1].main_nationality.name,Height:a.chosenPlayers[a.chosenPlayers.length-1].height,Age:a.getAge(a.chosenPlayers[a.chosenPlayers.length-1].birth_date),Position:a.chosenPlayers[a.chosenPlayers.length-1].position.short_name,Team:a.chosenPlayerCareer.Team,
        GP:a.chosenPlayerCareer.GP,MIN:a.chosenPlayerCareer.MIN,PTS:a.chosenPlayerCareer.PTS.toFixed(1),FGM:a.chosenPlayerCareer.FGM.toFixed(1),FGA:a.chosenPlayerCareer.FGA.toFixed(1),"FG%":a.chosenPlayerCareer["FG%"].toFixed(1),"3PM":a.chosenPlayerCareer["3PM"].toFixed(1),"3PA":a.chosenPlayerCareer["3PA"].toFixed(1),"3P%":a.chosenPlayerCareer["3P%"].toFixed(1),"2PM":a.chosenPlayerCareer["2PM"].toFixed(1),"2PA":a.chosenPlayerCareer["2PA"].toFixed(1),"2P%":a.chosenPlayerCareer["2P%"].toFixed(1),FTM:a.chosenPlayerCareer.FTM.toFixed(1),
        FTA:a.chosenPlayerCareer.FTA.toFixed(1),"FT%":a.chosenPlayerCareer["FT%"].toFixed(1),OR:a.chosenPlayerCareer.OR.toFixed(1),DR:a.chosenPlayerCareer.DR.toFixed(1),TR:a.chosenPlayerCareer.TR.toFixed(1),AS:a.chosenPlayerCareer.AS.toFixed(1),TO:a.chosenPlayerCareer.TO.toFixed(1),ST:a.chosenPlayerCareer.ST.toFixed(1),BS:a.chosenPlayerCareer.BS.toFixed(1),FM:a.chosenPlayerCareer.FM.toFixed(1),FR:a.chosenPlayerCareer.FR.toFixed(1),VAL:a.chosenPlayerCareer.VAL.toFixed(1),VIR:a.chosenPlayerCareer.VIR.toFixed(2),
        OER:a.chosenPlayerCareer.OER.toFixed(2),timeToNum:a.chosenPlayerCareer.timeInNum});a.chosenPlayerCareer={Team:"",GP:0,MIN:0,PTS:0,FGM:0,FGA:0,"FG%":0,"3PM":0,"3PA":0,"3P%":0,"2PM":0,"2PA":0,"2P%":0,FTM:0,FTA:0,"FT%":0,OR:0,DR:0,TR:0,AS:0,TO:0,ST:0,BS:0,FM:0,FR:0,VAL:0,VIR:0,OER:0,timeInNum:0};a.comparisonPlayers();setTimeout(function(){$("#comparison-select-season_0").selectpicker("refresh");$("#comparison-select-season_1").selectpicker("refresh");$("#comparison-select-season_2").selectpicker("refresh");
        $("#comparison-select-season_3").selectpicker("refresh");$("#comparison-select-season_4").selectpicker("refresh");$("#comparison-select-league_0").selectpicker("refresh");$("#comparison-select-league_1").selectpicker("refresh");$("#comparison-select-league_2").selectpicker("refresh");$("#comparison-select-league_3").selectpicker("refresh");$("#comparison-select-league_4").selectpicker("refresh")},0)})};a.selectSeason=function(b){a.chosenPlayersLeagues[b]=[];a.chosenPlayersData[b].map(function(c){a.selectedSeason[b].season===
c.season_name&&"average"!==c.league_name&&a.chosenPlayersLeagues[b].push(c.league_name)});a.selectedLeague[b].league=a.chosenPlayersLeagues[b][0];a.updateDataTable(b,a.selectedLeague[b].league,a.selectedSeason[b].season);a.comparisonPlayers()};a.selectLeague=function(b){a.updateDataTable(b,a.selectedLeague[b].league,a.selectedSeason[b].season);a.comparisonPlayers()};a.updateDataTable=function(b,c,d){setTimeout(function(){$("#comparison-select-season_0").selectpicker("refresh");$("#comparison-select-season_1").selectpicker("refresh");
    $("#comparison-select-season_2").selectpicker("refresh");$("#comparison-select-season_3").selectpicker("refresh");$("#comparison-select-season_4").selectpicker("refresh");$("#comparison-select-league_0").selectpicker("refresh");$("#comparison-select-league_1").selectpicker("refresh");$("#comparison-select-league_2").selectpicker("refresh");$("#comparison-select-league_3").selectpicker("refresh");$("#comparison-select-league_4").selectpicker("refresh")},0);a.chosenPlayersData[b].map(function(b){b.league_name===
c&&b.season_name===d&&"average"!==b.league_name&&(a.chosenPlayerCareer.Team=b.team_name,a.chosenPlayerCareer.GP=b.played,a.chosenPlayerCareer.MIN=b.minutes,a.chosenPlayerCareer.PTS=b.points,a.chosenPlayerCareer.FGM=b.fg_made,a.chosenPlayerCareer.FGA=b.fg_attempts,a.chosenPlayerCareer["FG%"]=a.chosenPlayerCareer.FGA?a.chosenPlayerCareer.FGM/a.chosenPlayerCareer.FGA*100:0,a.chosenPlayerCareer["3PM"]=b.p3_made,a.chosenPlayerCareer["3PA"]=b.p3_attempts,a.chosenPlayerCareer["3P%"]=a.chosenPlayerCareer["3PA"]?
    a.chosenPlayerCareer["3PM"]/a.chosenPlayerCareer["3PA"]*100:0,a.chosenPlayerCareer["2PM"]=b.p2_made,a.chosenPlayerCareer["2PA"]=b.p2_attempts,a.chosenPlayerCareer["2P%"]=a.chosenPlayerCareer["2PA"]?a.chosenPlayerCareer["2PM"]/a.chosenPlayerCareer["2PA"]*100:0,a.chosenPlayerCareer.FTM=b.ft_made,a.chosenPlayerCareer.FTA=b.ft_attempts,a.chosenPlayerCareer["FT%"]=a.chosenPlayerCareer.FTA?a.chosenPlayerCareer.FTM/a.chosenPlayerCareer.FTA*100:0,a.chosenPlayerCareer.OR=b.of_rebounds,a.chosenPlayerCareer.DR=
    b.df_rebounds,a.chosenPlayerCareer.TR=a.chosenPlayerCareer.OR+a.chosenPlayerCareer.DR,a.chosenPlayerCareer.AS=b.assists,a.chosenPlayerCareer.TO=b.turnovers,a.chosenPlayerCareer.ST=b.steals,a.chosenPlayerCareer.BS=b.block_shots,a.chosenPlayerCareer.FM=b.fouls_made,a.chosenPlayerCareer.FR=b.fouls_received,a.chosenPlayerCareer.VAL=b.val,a.chosenPlayerCareer.VIR=b.vir,a.chosenPlayerCareer.OER=b.oer,a.chosenPlayerCareer.timeInNum=a.timeToNum(b.minutes))});a.chosenPlayersDataTables[b].Team=a.chosenPlayerCareer.Team;
    a.chosenPlayersDataTables[b].GP=a.chosenPlayerCareer.GP;a.chosenPlayersDataTables[b].MIN=a.chosenPlayerCareer.MIN;a.chosenPlayersDataTables[b].PTS=a.chosenPlayerCareer.PTS.toFixed(1);a.chosenPlayersDataTables[b].FGM=a.chosenPlayerCareer.FGM.toFixed(1);a.chosenPlayersDataTables[b].FGA=a.chosenPlayerCareer.FGA.toFixed(1);a.chosenPlayersDataTables[b]["FG%"]=a.chosenPlayerCareer["FG%"].toFixed(1);a.chosenPlayersDataTables[b]["3PM"]=a.chosenPlayerCareer["3PM"].toFixed(1);a.chosenPlayersDataTables[b]["3PA"]=
        a.chosenPlayerCareer["3PA"].toFixed(1);a.chosenPlayersDataTables[b]["3P%"]=a.chosenPlayerCareer["3P%"].toFixed(1);a.chosenPlayersDataTables[b]["2PM"]=a.chosenPlayerCareer["2PM"].toFixed(1);a.chosenPlayersDataTables[b]["2PA"]=a.chosenPlayerCareer["2PA"].toFixed(1);a.chosenPlayersDataTables[b]["2P%"]=a.chosenPlayerCareer["2P%"].toFixed(1);a.chosenPlayersDataTables[b].FTM=a.chosenPlayerCareer.FTM.toFixed(1);a.chosenPlayersDataTables[b].FTA=a.chosenPlayerCareer.FTA.toFixed(1);a.chosenPlayersDataTables[b]["FT%"]=
        a.chosenPlayerCareer["FT%"].toFixed(1);a.chosenPlayersDataTables[b].OR=a.chosenPlayerCareer.OR.toFixed(1);a.chosenPlayersDataTables[b].DR=a.chosenPlayerCareer.DR.toFixed(1);a.chosenPlayersDataTables[b].TR=a.chosenPlayerCareer.TR.toFixed(1);a.chosenPlayersDataTables[b].AS=a.chosenPlayerCareer.AS.toFixed(1);a.chosenPlayersDataTables[b].TO=a.chosenPlayerCareer.TO.toFixed(1);a.chosenPlayersDataTables[b].ST=a.chosenPlayerCareer.ST.toFixed(1);a.chosenPlayersDataTables[b].BS=a.chosenPlayerCareer.BS.toFixed(1);
    a.chosenPlayersDataTables[b].FM=a.chosenPlayerCareer.FM.toFixed(1);a.chosenPlayersDataTables[b].FR=a.chosenPlayerCareer.FR.toFixed(1);a.chosenPlayersDataTables[b].VAL=a.chosenPlayerCareer.VAL.toFixed(1);a.chosenPlayersDataTables[b].VIR=a.chosenPlayerCareer.VIR.toFixed(2);a.chosenPlayersDataTables[b].OER=a.chosenPlayerCareer.OER.toFixed(2);a.chosenPlayerCareer={Team:"",GP:0,MIN:0,PTS:0,FGM:0,FGA:0,"FG%":0,"3PM":0,"3PA":0,"3P%":0,"2PM":0,"2PA":0,"2P%":0,FTM:0,FTA:0,"FT%":0,OR:0,DR:0,TR:0,AS:0,TO:0,
        ST:0,BS:0,FM:0,FR:0,VAL:0,VIR:0,OER:0,timeInNum:0}};a.comparisonPlayers=function(){for(key in a.chosenPlayersDataTables[0])a.comparisonBubble[key]=a.chosenPlayersDataTables[0][key];for(var b=0;b<a.chosenPlayersDataTables.length;b++)for(key in a.comparisonBubble)a.comparisonBubble[key]=0>a.comparisonBubble[key]-a.chosenPlayersDataTables[b][key]?a.chosenPlayersDataTables[b][key]:a.comparisonBubble[key]};a.timeToNum=function(a){var b=a.slice(0,2);a=a.slice(3,5);return 6E4*b+1E3*a};a.getAge=function(a){return a?
    (new Date).getFullYear()-(new Date(a)).getFullYear()+" years":""}}]);